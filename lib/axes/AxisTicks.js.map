{"version":3,"sources":["../../../src/lib/axes/AxisTicks.js"],"names":["tickTransform_svg_axisX","scale","tick","Math","round","tickTransform_svg_axisY","Tick","props","transform","tickStroke","tickStrokeOpacity","textAnchor","fontSize","fontFamily","x","y","x2","y2","dy","children","Component","propTypes","PropTypes","arrayOf","Number","string","number","node","isRequired","drawOnCanvasStatic","ctx","result","tickTransform","canvas_dy","format","origin","beginPath","moveTo","lineTo","stroke","fillText","AxisTicks","helper","ticks","map","idx","orient","oneOf","innerTickSize","tickFormat","func","tickPadding","array","tickValues","defaultProps","tickArguments","domain","baseFormat","identity","d","sign","tickSpacing","max","xScale","yScale","xAxis","strokeStyle","font","fillStyle","textAlign","forEach"],"mappings":"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","file":"AxisTicks.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { hexToRGBA, isNotDefined, identity } from \"../utils\";\n\nfunction tickTransform_svg_axisX(scale, tick) {\n\treturn [Math.round(scale(tick)), 0];\n}\n\nfunction tickTransform_svg_axisY(scale, tick) {\n\treturn [0, Math.round(scale(tick))];\n}\n\nclass Tick extends Component {\n\trender() {\n\t\tconst { transform, tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = this.props;\n\t\tconst { x, y, x2, y2, dy } = this.props;\n\t\treturn (\n\t\t\t<g className=\"tick\" transform={`translate(${ transform[0] }, ${ transform[1] })`} >\n\t\t\t\t<line shapeRendering=\"crispEdges\" opacity={tickStrokeOpacity} stroke={tickStroke} x2={x2} y2={y2} />\n\t\t\t\t<text\n\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\tfill={tickStroke}\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTick.propTypes = {\n\ttransform: PropTypes.arrayOf(Number),\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tx2: PropTypes.number,\n\ty2: PropTypes.number,\n\tdy: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n};\n\nTick.drawOnCanvasStatic = (tick, ctx, result) => {\n\tconst { scale, tickTransform, canvas_dy, x, y, x2, y2, format } = result;\n\n\tconst origin = tickTransform(scale, tick);\n\n\tctx.beginPath();\n\n\tctx.moveTo(origin[0], origin[1]);\n\tctx.lineTo(origin[0] + x2, origin[1] + y2);\n\tctx.stroke();\n\n\tctx.fillText(format(tick), origin[0] + x, origin[1] + y + canvas_dy);\n};\n\nclass AxisTicks extends Component {\n\trender() {\n\t\tconst result = AxisTicks.helper(this.props, this.props.scale);\n\t\tconst { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format } = result;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tick key={idx} transform={tickTransform(scale, tick)}\n\t\t\t\t\t\t\ttickStroke={tickStroke} tickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\t\t\tx2={x2} y2={y2} textAnchor={textAnchor}\n\t\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick)}</Tick>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nAxisTicks.propTypes = {\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\n\tinnerTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\tticks: PropTypes.array,\n\ttickValues: PropTypes.array,\n\tscale: PropTypes.func.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n};\n\nAxisTicks.defaultProps = {\n\tinnerTickSize: 5,\n\ttickPadding: 6,\n\tticks: [10],\n\ttickStroke: \"#000\",\n\ttickStrokeOpacity: 1,\n};\n\nAxisTicks.helper = (props, scale) => {\n\tconst { orient, innerTickSize, tickFormat, tickPadding, fontSize, fontFamily } = props;\n\tconst { ticks: tickArguments, tickValues, tickStroke, tickStrokeOpacity } = props;\n\n\tconst ticks = isNotDefined(tickValues)\n\t\t? (scale.ticks\n\t\t\t? scale.ticks(...tickArguments)\n\t\t\t: scale.domain())\n\t\t: tickValues;\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat(...tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => baseFormat(d) ? tickFormat(d) : \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet tickTransform, x, y, x2, y2, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\ttickTransform = tickTransform_svg_axisX;\n\t\tx2 = 0;\n\t\ty2 = sign * innerTickSize;\n\t\tx = 0;\n\t\ty = sign * tickSpacing;\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\t} else {\n\t\ttickTransform = tickTransform_svg_axisY;\n\t\tx2 = sign * innerTickSize;\n\t\ty2 = 0;\n\t\tx = sign * tickSpacing;\n\t\ty = 0;\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\treturn { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, canvas_dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format };\n};\n\nAxisTicks.drawOnCanvasStatic = (props, ctx, xScale, yScale) => {\n\tprops = { ...AxisTicks.defaultProps, ...props };\n\n\tconst { orient } = props;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\tconst result = AxisTicks.helper(props, xAxis ? xScale : yScale);\n\n\tconst { tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.font = `${ fontSize }px ${fontFamily}`;\n\tctx.fillStyle = tickStroke;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\t// ctx.textBaseline = 'middle';\n\n\tresult.ticks.forEach((tick) => {\n\t\tTick.drawOnCanvasStatic(tick, ctx, result);\n\t});\n};\n\nexport default AxisTicks;\n"]}