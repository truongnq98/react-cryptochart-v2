{"version":3,"sources":["../../../src/lib/calculator/smoothedForceIndex.js"],"names":["underlyingAlgorithm","merge","combine","force","smoothed","options","defaultOptions","calculator","data","smoothingType","smoothingWindow","sourcePath","volumePath","algo","ma","forceMA","windowSize","undefined","undefinedLength","x","arguments","length"],"mappings":";;;;;;;;kBAQe,YAAW;;AAEzB,KAAMA,sBAAsB,2BAA5B;AACA,KAAMC,QAAQ,qBACZC,OADY,CACJ,UAACC,KAAD,EAAQC,QAAR,EAAqB;AAC7B,SAAO,EAAED,YAAF,EAASC,kBAAT,EAAP;AACA,EAHY,CAAd;;AAKA,KAAIC,UAAUC,gDAAd;AACA,UAASC,UAAT,CAAoBC,IAApB,EAA0B;AAAA,iBACkBH,OADlB;AAAA,MACjBI,aADiB,YACjBA,aADiB;AAAA,MACFC,eADE,YACFA,eADE;AAAA,kBAEUL,OAFV;AAAA,MAEjBM,UAFiB,aAEjBA,UAFiB;AAAA,MAELC,UAFK,aAELA,UAFK;;;AAIzB,MAAMC,OAAOb,oBACXK,OADW,CACH,EAAEM,sBAAF,EAAcC,sBAAd,EADG,CAAb;;AAGA,MAAMT,QAAQU,KAAKL,IAAL,CAAd;;AAEA,MAAMM,KAAKL,kBAAkB,KAAlB,GAA0B,oBAA1B,GAAkC,oBAA7C;AACA,MAAMM,UAAUD,GACdT,OADc,CACN;AACRW,eAAYN,eADJ;AAERC,eAAYM;AAFJ,GADM,CAAhB;;AAMA,MAAMb,WAAWW,QAAQZ,KAAR,CAAjB;AACA,SAAOF,MAAME,KAAN,EAAaC,QAAb,CAAP;AACA;;AAEDG,YAAWW,eAAX,GAA6B,YAAW;AAAA,kBACXb,OADW;AAAA,MAC/BK,eAD+B,aAC/BA,eAD+B;;AAEvC,SAAOV,oBAAoBkB,eAApB,KAAwCR,eAAxC,GAA0D,CAAjE;AACA,EAHD;AAIAH,YAAWF,OAAX,GAAqB,UAASc,CAAT,EAAY;AAChC,MAAI,CAACC,UAAUC,MAAf,EAAuB;AACtB,UAAOhB,OAAP;AACA;AACDA,yBAAeC,gDAAf,EAAkCa,CAAlC;AACA,SAAOZ,UAAP;AACA,EAND;;AAQA,QAAOA,UAAP;AACA,C;;AAhDD;;;;AACA;;;;AACA;;;;AACA;;AACA","file":"smoothedForceIndex.js","sourcesContent":["\n\nimport forceIndex from \"./forceIndex\";\nimport ema from \"./ema\";\nimport sma from \"./sma\";\nimport { zipper } from \"../utils\";\nimport { SmoothedForceIndex as defaultOptions } from \"./defaultOptionsForComputation\";\n\nexport default function() {\n\n\tconst underlyingAlgorithm = forceIndex();\n\tconst merge = zipper()\n\t\t.combine((force, smoothed) => {\n\t\t\treturn { force, smoothed };\n\t\t});\n\n\tlet options = defaultOptions;\n\tfunction calculator(data) {\n\t\tconst { smoothingType, smoothingWindow } = options;\n\t\tconst { sourcePath, volumePath } = options;\n\n\t\tconst algo = underlyingAlgorithm\n\t\t\t.options({ sourcePath, volumePath });\n\n\t\tconst force = algo(data);\n\n\t\tconst ma = smoothingType === \"ema\" ? ema() : sma();\n\t\tconst forceMA = ma\n\t\t\t.options({\n\t\t\t\twindowSize: smoothingWindow,\n\t\t\t\tsourcePath: undefined\n\t\t\t});\n\n\t\tconst smoothed = forceMA(force);\n\t\treturn merge(force, smoothed);\n\t}\n\n\tcalculator.undefinedLength = function() {\n\t\tconst { smoothingWindow } = options;\n\t\treturn underlyingAlgorithm.undefinedLength() + smoothingWindow - 1;\n\t};\n\tcalculator.options = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn options;\n\t\t}\n\t\toptions = { ...defaultOptions, ...x };\n\t\treturn calculator;\n\t};\n\n\treturn calculator;\n}\n"]}