{"version":3,"sources":["../../src/lib/Chart.js"],"names":["Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","each","copy","chartId","origin","x","y","children","PureComponent","propTypes","height","PropTypes","number","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","yPanEnabled","noop","contextTypes","childContextTypes","object"],"mappings":"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","file":"Chart.js","sourcesContent":["\"use strict\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { scaleLinear } from \"d3-scale\";\n\nimport PureComponent from \"./utils/PureComponent\";\nimport {\n\tisNotDefined,\n\tnoop,\n\tfind,\n} from \"./utils\";\n\nclass Chart extends PureComponent {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.yScale = this.yScale.bind(this);\n\t\tthis.listener = this.listener.bind(this);\n\t}\n\tUNSAFE_componentWillMount() {\n\t\tconst { id } = this.props;\n\t\tconst { subscribe } = this.context;\n\t\tsubscribe(\"chart_\" + id,\n\t\t\t{\n\t\t\t\tlistener: this.listener,\n\t\t\t}\n\t\t);\n\t}\n\tcomponentWillUnmount() {\n\t\tconst { id } = this.props;\n\t\tconst { unsubscribe } = this.context;\n\t\tunsubscribe(\"chart_\" + id);\n\t}\n\tlistener(type, moreProps, state, e) {\n\t\tconst { id, onContextMenu } = this.props;\n\n\t\tif (type === \"contextmenu\") {\n\t\t\tconst { currentCharts } = moreProps;\n\t\t\tif (currentCharts.indexOf(id) > -1) {\n\t\t\t\tonContextMenu(moreProps, e);\n\t\t\t}\n\t\t}\n\t}\n\tyScale() {\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === this.props.id);\n\t\treturn chartConfig.yScale.copy();\n\t}\n\tgetChildContext() {\n\t\tconst { id: chartId } = this.props;\n\t\tconst chartConfig = find(this.context.chartConfig, each => each.id === chartId);\n\n\t\treturn {\n\t\t\tchartId,\n\t\t\tchartConfig,\n\t\t};\n\t}\n\trender() {\n\t\tconst { origin } = find(this.context.chartConfig, each => each.id === this.props.id);\n\t\tconst [x, y] = origin;\n\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\n\t}\n}\n\nChart.propTypes = {\n\theight: PropTypes.number,\n\torigin: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n\tyExtents: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tyExtentsCalculator: function(props, propName, componentName) {\n\t\tif (isNotDefined(props.yExtents) && typeof props.yExtentsCalculator !== \"function\")\n\t\t\treturn new Error(\"yExtents or yExtentsCalculator must\"\n\t\t\t\t+ ` be present on ${componentName}. Validation failed.`);\n\t},\n\tonContextMenu: PropTypes.func,\n\tyScale: PropTypes.func,\n\n\tflipYScale: PropTypes.bool,\n\tpadding: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.shape({\n\t\t\ttop: PropTypes.number,\n\t\t\tbottom: PropTypes.number,\n\t\t})\n\t]),\n\tchildren: PropTypes.node,\n};\n\nChart.defaultProps = {\n\tid: 0,\n\torigin: [0, 0],\n\tpadding: 0,\n\tyScale: scaleLinear(),\n\tflipYScale: false,\n\tyPan: true,\n\tyPanEnabled: false,\n\tonContextMenu: noop,\n};\n\nChart.contextTypes = {\n\tchartConfig: PropTypes.array,\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n};\n\nChart.childContextTypes = {\n\tchartConfig: PropTypes.object.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default Chart;\n"]}