{"version":3,"sources":["../../../../src/lib/tooltip/BollingerBandTooltip.js"],"names":["React","Component","PropTypes","format","displayValuesFor","GenericChartComponent","isDefined","functor","ToolTipText","ToolTipTSpanLabel","BollingerBandTooltip","props","renderSVG","bind","moreProps","onClick","displayFormat","yAccessor","options","textFill","labelFill","interactiveMode","chartConfig","width","height","currentItem","top","middle","bottom","item","originProp","origin","x","y","sourcePath","windowSize","multiplier","movingAverageType","tooltipLabel","tooltipValue","className","fontFamily","fontSize","propTypes","string","func","isRequired","array","shape","number","bool","defaultProps"],"mappings":"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","file":"BollingerBandTooltip.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport displayValuesFor from \"./displayValuesFor\";\nimport GenericChartComponent from \"../GenericChartComponent\";\n\nimport { isDefined, functor } from \"../utils\";\nimport ToolTipText from \"./ToolTipText\";\nimport ToolTipTSpanLabel from \"./ToolTipTSpanLabel\";\n\nclass BollingerBandTooltip extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst { onClick, displayFormat, yAccessor, options, textFill, labelFill, interactiveMode } = this.props;\n\t\tconst { displayValuesFor } = this.props;\n\n\t\tconst { chartConfig: { width, height } } = moreProps;\n\n\t\tconst currentItem = displayValuesFor(this.props, moreProps);\n\n\t\tlet top, middle, bottom;\n\t\ttop = middle = bottom = \"n/a\";\n\n\t\tif (isDefined(currentItem)\n\t\t\t\t&& isDefined(yAccessor(currentItem))) {\n\t\t\tconst item = yAccessor(currentItem);\n\t\t\ttop = displayFormat(item.top);\n\t\t\tmiddle = displayFormat(item.middle);\n\t\t\tbottom = displayFormat(item.bottom);\n\t\t}\n\n\t\tconst { origin: originProp } = this.props;\n\t\tconst origin = functor(originProp);\n\t\tconst [x, y] = origin(width, height);\n\n\t\tconst { sourcePath, windowSize, multiplier, movingAverageType } = options;\n\t\tconst tooltipLabel = `BB(${sourcePath}, ${windowSize}, ${multiplier}, ${movingAverageType})${interactiveMode ? \": \" : \"\"}`;\n\t\tconst tooltipValue = interactiveMode ? `${top}, ${middle}, ${bottom}` : \"\";\n\t\treturn (\n\t\t\t<g transform={`translate(${ x }, ${ y })`}\n\t\t\t\tclassName={this.props.className} onClick={onClick}>\n\t\t\t\t<ToolTipText x={0} y={0}\n\t\t\t\t\tfontFamily={this.props.fontFamily} fontSize={this.props.fontSize}>\n\t\t\t\t\t<ToolTipTSpanLabel fill={labelFill}>{tooltipLabel}</ToolTipTSpanLabel>\n\t\t\t\t\t<tspan fill={textFill}>{tooltipValue}</tspan>\n\t\t\t\t</ToolTipText>\n\t\t\t</g>\n\t\t);\n\t}\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tclip={false}\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tdrawOn={[\"mousemove\"]}\n\t\t/>;\n\t}\n}\n\nBollingerBandTooltip.propTypes = {\n\tclassName: PropTypes.string,\n\tyAccessor: PropTypes.func.isRequired,\n\tdisplayValuesFor: PropTypes.func,\n\tdisplayFormat: PropTypes.func.isRequired,\n\torigin: PropTypes.array.isRequired,\n\tonClick: PropTypes.func,\n\toptions: PropTypes.shape({\n\t\tsourcePath: PropTypes.string.isRequired,\n\t\twindowSize: PropTypes.number.isRequired,\n\t\tmultiplier: PropTypes.number.isRequired,\n\t\tmovingAverageType: PropTypes.string.isRequired,\n\t}).isRequired,\n\ttextFill: PropTypes.string,\n\tlabelFill: PropTypes.string,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tinteractiveMode: PropTypes.bool,\n};\n\nBollingerBandTooltip.defaultProps = {\n\tclassName: \"react-stockcharts-tooltip react-stockcharts-bollingerband-tooltip\",\n\tdisplayFormat: format(\".2f\"),\n\tdisplayValuesFor: displayValuesFor,\n\torigin: [0, 10],\n\tinteractiveMode: false,\n};\n\nexport default BollingerBandTooltip;\n"]}